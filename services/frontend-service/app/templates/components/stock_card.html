{% if stock %}
<div class="modern-card p-8 stock-card animate-fadeIn">
    <!-- Header with Name and Price -->
    <div class="flex items-start justify-between mb-8">
        <div class="flex-1">
            <h2 class="text-3xl font-bold text-primary mb-2">{{ stock.name or stock.symbol }}</h2>
            <p class="text-secondary text-lg">{{ stock.symbol }}</p>
        </div>
        {% if stock.current_price %}
        <div class="text-right">
            <div class="text-4xl font-bold text-primary">
                €{{ "%.2f"|format(stock.current_price) }}
            </div>
            <div class="text-sm text-secondary mt-1 font-medium">{{ stock.currency or 'EUR' }}</div>
        </div>
        {% endif %}
    </div>

    <!-- Key Identifiers -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
        {% if stock.isin %}
        <div class="bg-accent rounded-xl p-4">
            <div class="text-xs text-secondary mb-2 font-semibold uppercase tracking-wide">ISIN</div>
            <div class="font-bold text-primary text-lg">{{ stock.isin }}</div>
        </div>
        {% endif %}
        
        {% if stock.wkn %}
        <div class="bg-accent rounded-xl p-4">
            <div class="text-xs text-secondary mb-2 font-semibold uppercase tracking-wide">WKN</div>
            <div class="font-bold text-primary text-lg">{{ stock.wkn }}</div>
        </div>
        {% endif %}
        
        {% if stock.exchange %}
        <div class="bg-accent rounded-xl p-4">
            <div class="text-xs text-secondary mb-2 font-semibold uppercase tracking-wide">Exchange</div>
            <div class="font-bold text-primary text-lg">{{ stock.exchange }}</div>
        </div>
        {% endif %}
        
        {% if stock.country %}
        <div class="bg-accent rounded-xl p-4">
            <div class="text-xs text-secondary mb-2 font-semibold uppercase tracking-wide">Country</div>
            <div class="font-bold text-primary text-lg">{{ stock.country }}</div>
        </div>
        {% endif %}
    </div>

    <!-- Sector and Industry -->
    {% if stock.sector or stock.industry %}
    <div class="border-t border-gray-100 pt-6 mb-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            {% if stock.sector %}
            <div>
                <div class="text-sm text-secondary mb-2 font-semibold">Sector</div>
                <div class="font-bold text-primary text-lg">{{ stock.sector }}</div>
            </div>
            {% endif %}
            
            {% if stock.industry %}
            <div>
                <div class="text-sm text-secondary mb-2 font-semibold">Industry</div>
                <div class="font-bold text-primary text-lg">{{ stock.industry }}</div>
            </div>
            {% endif %}
        </div>
    </div>
    {% endif %}

    <!-- Key Figures -->
    {% if stock.market_cap or stock.pe_ratio or stock.dividend_yield or stock.volume %}
    <div class="border-t border-gray-100 pt-6">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
            {% if stock.market_cap %}
            <div>
                <div class="text-xs text-secondary mb-2 font-semibold uppercase tracking-wide">Market Cap</div>
                <div class="font-bold text-primary text-lg">
                    {% if stock.market_cap >= 1000000000 %}
                        €{{ "%.1f"|format(stock.market_cap / 1000000000) }}B
                    {% elif stock.market_cap >= 1000000 %}
                        €{{ "%.1f"|format(stock.market_cap / 1000000) }}M
                    {% else %}
                        €{{ "%.0f"|format(stock.market_cap) }}
                    {% endif %}
                </div>
            </div>
            {% endif %}
            
            {% if stock.pe_ratio %}
            <div>
                <div class="text-xs text-secondary mb-2 font-semibold uppercase tracking-wide">P/E Ratio</div>
                <div class="font-bold text-primary text-lg">{{ "%.2f"|format(stock.pe_ratio) }}</div>
            </div>
            {% endif %}
            
            {% if stock.dividend_yield %}
            <div>
                <div class="text-xs text-secondary mb-2 font-semibold uppercase tracking-wide">Div. Yield</div>
                <div class="font-bold text-success text-lg">{{ "%.2f"|format(stock.dividend_yield * 100) }}%</div>
            </div>
            {% endif %}
            
            {% if stock.volume %}
            <div>
                <div class="text-xs text-secondary mb-2 font-semibold uppercase tracking-wide">Volume</div>
                <div class="font-bold text-primary text-lg">{{ "{:,}".format(stock.volume) }}</div>
            </div>
            {% endif %}
        </div>
    </div>
    {% endif %}

    <!-- Data Source Footer -->
    <div class="mt-8 pt-6 border-t border-gray-100">
        <div class="flex items-center justify-between text-sm">
            <div class="flex items-center space-x-2 text-secondary">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                <span class="font-medium">Source: {{ stock.data_source or 'Yahoo Finance' }}</span>
            </div>
            {% if stock.cached %}
            <div class="flex items-center space-x-1 text-success bg-green-50 px-3 py-1 rounded-full">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                </svg>
                <span class="font-semibold text-sm">Cached</span>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endif %}
