{% if stock %}
<div class="bg-white rounded-lg shadow-md p-6 border border-gray-200 hover:shadow-lg transition">
    <div class="flex items-start justify-between mb-4">
        <div class="flex-1">
            <h2 class="text-2xl font-bold text-gray-900 mb-2">{{ stock.name or stock.symbol }}</h2>
            <p class="text-gray-600">{{ stock.symbol }}</p>
        </div>
        {% if stock.current_price %}
        <div class="text-right">
            <div class="text-3xl font-bold text-gray-900">
                €{{ "%.2f"|format(stock.current_price) }}
            </div>
            <div class="text-sm text-gray-500 mt-1">{{ stock.currency or 'EUR' }}</div>
        </div>
        {% endif %}
    </div>

    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
        {% if stock.isin %}
        <div class="bg-gray-50 rounded-lg p-3">
            <div class="text-xs text-gray-500 mb-1">ISIN</div>
            <div class="font-semibold text-gray-900">{{ stock.isin }}</div>
        </div>
        {% endif %}
        
        {% if stock.wkn %}
        <div class="bg-gray-50 rounded-lg p-3">
            <div class="text-xs text-gray-500 mb-1">WKN</div>
            <div class="font-semibold text-gray-900">{{ stock.wkn }}</div>
        </div>
        {% endif %}
        
        {% if stock.exchange %}
        <div class="bg-gray-50 rounded-lg p-3">
            <div class="text-xs text-gray-500 mb-1">Exchange</div>
            <div class="font-semibold text-gray-900">{{ stock.exchange }}</div>
        </div>
        {% endif %}
        
        {% if stock.country %}
        <div class="bg-gray-50 rounded-lg p-3">
            <div class="text-xs text-gray-500 mb-1">Country</div>
            <div class="font-semibold text-gray-900">{{ stock.country }}</div>
        </div>
        {% endif %}
    </div>

    {% if stock.sector or stock.industry %}
    <div class="border-t border-gray-200 pt-4 mb-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            {% if stock.sector %}
            <div>
                <div class="text-xs text-gray-500 mb-1">Sector</div>
                <div class="font-medium text-gray-900">{{ stock.sector }}</div>
            </div>
            {% endif %}
            
            {% if stock.industry %}
            <div>
                <div class="text-xs text-gray-500 mb-1">Industry</div>
                <div class="font-medium text-gray-900">{{ stock.industry }}</div>
            </div>
            {% endif %}
        </div>
    </div>
    {% endif %}

    {% if stock.market_cap %}
    <div class="border-t border-gray-200 pt-4">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <div>
                <div class="text-xs text-gray-500 mb-1">Market Cap</div>
                <div class="font-medium text-gray-900">
                    {% if stock.market_cap >= 1000000000 %}
                        €{{ "%.2f"|format(stock.market_cap / 1000000000) }}B
                    {% elif stock.market_cap >= 1000000 %}
                        €{{ "%.2f"|format(stock.market_cap / 1000000) }}M
                    {% else %}
                        €{{ "%.2f"|format(stock.market_cap) }}
                    {% endif %}
                </div>
            </div>
            
            {% if stock.pe_ratio %}
            <div>
                <div class="text-xs text-gray-500 mb-1">P/E Ratio</div>
                <div class="font-medium text-gray-900">{{ "%.2f"|format(stock.pe_ratio) }}</div>
            </div>
            {% endif %}
            
            {% if stock.dividend_yield %}
            <div>
                <div class="text-xs text-gray-500 mb-1">Dividend Yield</div>
                <div class="font-medium text-gray-900">{{ "%.2f"|format(stock.dividend_yield * 100) }}%</div>
            </div>
            {% endif %}
            
            {% if stock.volume %}
            <div>
                <div class="text-xs text-gray-500 mb-1">Volume</div>
                <div class="font-medium text-gray-900">{{ "{:,}".format(stock.volume) }}</div>
            </div>
            {% endif %}
        </div>
    </div>
    {% endif %}

    <!-- Data Source -->
    <div class="mt-4 pt-4 border-t border-gray-200">
        <div class="flex items-center justify-between text-xs text-gray-500">
            <div class="flex items-center space-x-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                <span>Source: {{ stock.data_source or 'Yahoo Finance' }}</span>
            </div>
            {% if stock.cached %}
            <div class="flex items-center space-x-1 text-green-600">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                </svg>
                <span>Cached</span>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endif %}
