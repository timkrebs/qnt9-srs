/*
 * Service Groups for QNT9 SRS Dashboard
 * Organizes services into logical groups for better visualization
 */

// Backend Microservices
object ServiceGroup "backend-services" {
  display_name = "Backend Microservices"
  
  assign where match("*service*", service.name) && !match("*dependency*", service.name)
}

// API Performance
object ServiceGroup "api-performance" {
  display_name = "API Response Time & Performance"
  
  assign where match("*response_time*", service.name) || match("*api*", service.name)
}

// Database Layer
object ServiceGroup "databases" {
  display_name = "Database Layer"
  
  assign where match("*pgsql*", service.name) || match("postgres", service.host.name) || match("timescaledb", service.host.name)
}

// Cache & Streaming
object ServiceGroup "cache-streaming" {
  display_name = "Cache & Message Streaming"
  
  assign where match("redis", service.host.name) || match("kafka", service.host.name)
}

// Service Discovery
object ServiceGroup "service-discovery" {
  display_name = "Service Discovery & Mesh"
  
  assign where match("consul", service.host.name) || match("*consul*", service.name)
}

// Health Endpoints
object ServiceGroup "health-checks" {
  display_name = "Service Health Endpoints"
  
  assign where match("*health*", service.name) || match("ping4", service.name)
}

// Metrics & Monitoring
object ServiceGroup "metrics" {
  display_name = "Metrics & Observability"
  
  assign where match("*metrics*", service.name) || match("*prometheus*", service.name)
}

// ETL Pipeline
object ServiceGroup "etl-pipeline" {
  display_name = "ETL Pipeline & Data Processing"
  
  assign where match("etl", service.host.name) || match("*etl*", service.name)
}

// Data Ingestion
object ServiceGroup "data-ingestion" {
  display_name = "Data Ingestion Layer"
  
  assign where match("ingestion", service.host.name) || match("*ingestion*", service.name)
}

// Search Services
object ServiceGroup "search" {
  display_name = "Search Service Layer"
  
  assign where match("search", service.host.name) || match("*search*", service.name)
}

// Frontend & User-Facing
object ServiceGroup "frontend" {
  display_name = "Frontend & User Interface"
  
  assign where match("frontend", service.host.name) || match("*frontend*", service.name)
}

// Network Connectivity
object ServiceGroup "network" {
  display_name = "Network & Connectivity"
  
  assign where match("tcp_port", service.name) || match("ping4", service.name)
}

// Critical Services (High Priority)
object ServiceGroup "critical" {
  display_name = "Critical Services"
  
  assign where service.vars.priority == "critical" || match("*api*", service.name)
}

// Data Quality
object ServiceGroup "data-quality" {
  display_name = "Data Quality & Validation"
  
  assign where match("*quality*", service.name) || match("*idempotency*", service.name)
}

// Dependencies
object ServiceGroup "dependencies" {
  display_name = "Service Dependencies"
  
  assign where match("*dependency*", service.name) || match("*provider*", service.name)
}
